# ~/ape/new_ape-extenstion/CLAUDE.md의 절대 규칙1 항목을 숙지한다.

# APE Extension 개발 TODO 리스트

## 문서 메타데이터
- **최종 업데이트**: 2025-05-10
- **버전**: 2.3
- **작성자**: Claude AI
- **목적**: APE Extension 기능 개발 및 안정화 작업 항목 관리

## 1. 기능 개발

### 1.1 Git 기능 개선
- [ ] 저장소 상태 표시 기능 구현
- [ ] 브랜치 목록 및 현재 브랜치 표시
- [ ] 최근 커밋 이력 표시 및 상호작용
- [ ] 상태 및 변경사항 아이콘 시각화
- [ ] 트리뷰 컨텍스트 메뉴 기능 개선
- [ ] Git conflict solver 슬래시 커맨드 기능 복구 (롤백에서 손실됨)

### 1.2 슬래시 커맨드 UI/UX 개선
- [x] 슬래시 커맨드 UI/UX 개선 문서 작성 (/docs/slash-commands-improvements.md)
- [ ] 디스코드 스타일 인라인 도움말 기능 구현
- [ ] 슬래시 커맨드 디렉토리/허브 구현 (모든 명령어 한 곳에서 보기)
- [ ] 폼 기반 인수 입력 UI 구현 (디스코드 스타일)
- [ ] 카테고리별 색상 및 아이콘 강화
- [ ] 슬래시 커맨드 검색 기능 구현
- [ ] 자주 사용하는 명령어 우선순위 시스템 구현
- [ ] 인라인 명령어 결과 표시 개선 (Slack 스타일)
- [ ] 접근성 기능 강화 (키보드 네비게이션, 스크린 리더 지원)
- [ ] CLI/GUI 하이브리드 명령어 입력 시스템 구현
  - [ ] 명령어 입력 시 텍스트와 GUI 폼 동시 지원
  - [ ] 명령어 인자 입력을 위한 시각적 폼 컴포넌트 개발
  - [ ] 키보드 단축키와 UI 컨트롤 통합
  - [ ] 자동 완성 및 시각적 피드백 시스템 구현
  - [ ] 컨텍스트 인식 명령어 도움말 개선

### 1.3 WebView UI 개선
- [ ] 채팅 인터페이스 응답성 향상
- [ ] 코드 블록 표시 및 상호작용 개선
- [ ] 다크/라이트 테마 지원 강화
- [ ] 메시지 포맷팅 및 마크다운 렌더링 개선
- [ ] 채팅 스크롤 및 네비게이션 최적화
- [ ] 폴백 UI 개선 (codicon이 로드되지 않을 때 이모지 기반 버튼 표시)

### 1.4 S3/Pocket 연동 기능
- [ ] S3 서비스 인터페이스 구현
- [ ] Pocket 연동 API 구현
- [ ] 파일 저장 및 검색 기능
- [ ] 메타데이터 관리 기능
- [ ] UI 통합 및 사용자 인터페이스 제공

### 1.5 @[에이전트] 기능
- [ ] 에이전트 선택 UI 구현 (@jira, @swdp, @ochestrator-beta, @pocket)
- [ ] 에이전트별 컨텍스트 관리 기능
- [ ] 에이전트 간 전환 및 상태 유지
- [ ] 에이전트 확장 구조 설계

### 1.6 파일 첨부 기능
- [ ] 파일 선택 및 업로드 UI
- [ ] 첨부 파일 표시 및 관리
- [ ] 첨부 파일 처리 및 LLM 전송
- [ ] 첨부 파일 보안 및 제한 구현

### 1.7 플러그인 시스템
- [ ] Jira 플러그인 기능 완성
- [ ] 플러그인 명령어 해석 및 파라미터 추출 구현
- [ ] API 응답 포맷팅 시스템 통합
- [ ] 플러그인 시스템 문서화

## 2. 성능 및 안정성 개선

### 2.1 성능 최적화
- [ ] WebView 렌더링 성능 개선
- [ ] LLM API 호출 캐싱 및 최적화
- [ ] 메모리 사용량 최적화
- [ ] 응답 지연 시간 최소화
- [ ] 대용량 데이터 처리 성능 개선

### 2.2 에러 처리 강화
- [ ] LLM 연동 오류 처리 개선
- [ ] 네트워크 연결 오류 관리
- [ ] 사용자 친화적 오류 메시지 구현
- [ ] 오류 로깅 및 분석 시스템 강화
- [ ] 자동 복구 메커니즘 구현
- [x] 내부 네트워크 LLM API 통합 오류 처리 및 모델 타입 검증 개선

### 2.3 코드 품질 개선
- [ ] 코드 중복 제거 및 추상화
- [ ] 타입 안전성 강화
- [ ] 비동기 처리 패턴 최적화
- [ ] 메모리 누수 해결
- [ ] 서비스 분리 및 의존성 개선
- [ ] TreeView 데이터 제공자 재시도 로직 안정화

### 2.4 보안 강화
- [ ] CSP 개선 (nonce 활용, 안전하지 않은 인라인 스크립트 제거)
- [ ] 내부망/외부망 환경 자동 감지 및 적용
- [ ] 사용자 인증 및 접근 제어 강화

## 3. 테스트 및 검증

### 3.1 자동화 테스트
- [ ] 핵심 모듈 단위 테스트 작성
- [ ] WebView UI 테스트 자동화
- [ ] API 통합 테스트 구현
- [ ] 성능 테스트 자동화
- [ ] E2E 테스트 시나리오 구현

### 3.2 사용자 중심 테스트
- [ ] 주요 사용자 시나리오 테스트
- [ ] 다양한 환경 검증 (OS, VS Code 버전)
- [ ] 사용성 테스트 및 피드백 수집
- [ ] 접근성 검증
- [ ] 초기 사용자 경험 최적화

## 4. 문서 및 지원

### 4.1 사용자 문서
- [ ] 시작하기 가이드 업데이트
- [ ] 주요 기능 사용법 문서화
- [ ] 자주 묻는 질문(FAQ) 작성
- [ ] 비디오 튜토리얼 제작
- [ ] 슬래시 커맨드 참조 가이드 작성

### 4.2 개발자 문서
- [ ] API 문서화
- [ ] 아키텍처 개요 문서
- [ ] 확장 개발 가이드
- [ ] 코드 스타일 가이드
- [ ] 배포 및 테스트 프로세스 문서

## 5. 초기 설정 및 온보딩 개선

> 상세 설계 문서: [/docs/initial-setup-guide.md](/docs/initial-setup-guide.md)

### 5.1 LLM 설정 인터페이스 개선
- [ ] LLM 엔드포인트 및 API 키 초기 설정 UI 구현 (pre-welcome 화면)
- [ ] OpenAI 호환 API 기본 설정 템플릿 제공 
- [ ] 커스텀 LLM 설정 인터페이스 구현 (엔드포인트, 키, 헤더 등)
- [ ] 설정 저장 및 검증 기능 구현
- [ ] 설정 변경 및 업데이트 UI 제공

### 5.2 서비스 연동 설정
- [ ] Jira 엔드포인트 및 인증 설정 인터페이스
- [ ] Bitbucket 엔드포인트 및 인증 설정 인터페이스
- [ ] 서비스 연결 상태 테스트 및 표시 기능
- [ ] 내부망/외부망 환경 자동 감지 및 적용
- [ ] 연동 서비스 설정 가이드 제공

### 5.3 초기 사용자 경험 개선
- [ ] 확장 설치 후 첫 실행 경험 최적화
- [ ] 단계별 설정 가이드 워크플로우 구현
- [ ] 설정 미완료 시 안내 UI 및 메시지 개선
- [ ] 설정 완료 후 기능 소개 및 시작하기 가이드 제공
- [ ] 시각적 피드백 및 상태 표시 개선
- [x] setup-internal.bat 영어 텍스트로 개선 (글로벌 사용성 향상)
- [x] setup-internal.bat 오류 처리 및 안정성 강화

## 6. VSCode Settings 기반 리팩토링

> 상세 설계 문서: [/docs/vscode-settings-based-design.md](/docs/vscode-settings-based-design.md)

### 6.1 코드 분석 및 설계 [TAG:claude-20250510-1:시작]
- [x] VSCode Settings 기반 설계 문서 작성 (/docs/vscode-settings-based-design.md)
- [ ] 하드코딩된 모델명 및 매니페스트 코드 식별
  - [ ] `src/core/llm/modelManager.ts` 하드코딩 목록 작성
  - [ ] `src/types/chat.ts` 모델 타입 열거형 확인
  - [ ] 기타 파일에서 하드코딩된 모델 관련 상수 식별
- [ ] VSCode Settings 데이터 구조 설계
  - [ ] 기존 설정 구조 분석
  - [ ] 새 설정 구조 스키마 정의
  - [ ] 타입 정의 작성
- [ ] 모델 관리 시스템 리팩토링 계획 수립
  - [ ] `ModelManager` 인터페이스 개선
  - [ ] 설정 접근 통합
  - [ ] 이벤트 처리 개선
- [ ] 플러그인 로딩 메커니즘 리팩토링 계획 수립
  - [ ] 플러그인 로더 개선
  - [ ] JSON 플러그인 처리 개선
  - [ ] 설정 기반 플러그인 관리
- [ ] 설정 관리 통합 인터페이스 설계
  - [ ] `SettingsService` 인터페이스 설계
  - [ ] 설정 변경 이벤트 처리 설계
  - [ ] 설정 스키마 기반 검증 방식 설계
- [ ] 마이그레이션 전략 및 단계별 구현 계획 수립
  - [ ] 기존 설정 마이그레이션 방안
  - [ ] 단계적 리팩토링 일정
  - [ ] 하위 호환성 유지 방안

### 6.2 구현 및 테스트
- [ ] 설정 서비스 구현
  - [ ] 기본 인터페이스 구현
  - [ ] 설정 변경 이벤트 구현
  - [ ] 스키마 기반 검증 구현
- [ ] 모델 관리 시스템 리팩토링
  - [ ] 하드코딩된 모델 상수 제거
  - [ ] 설정 기반 모델 관리 구현
  - [ ] 모델 변경 이벤트 처리 개선
- [ ] 플러그인 시스템 리팩토링
  - [ ] 플러그인 로더 개선
  - [ ] 설정 기반 플러그인 관리 구현
  - [ ] 플러그인 이벤트 처리 개선
- [ ] 단위 테스트 작성
  - [ ] 설정 서비스 테스트
  - [ ] 모델 관리 테스트
  - [ ] 플러그인 시스템 테스트
- [ ] 통합 테스트 작성
  - [ ] 설정 변경에 따른 시스템 동작 테스트
  - [ ] 마이그레이션 시나리오 테스트
  - [ ] 다양한 설정 조합 테스트

---

이 문서는 APE Extension의 기능 개발 및 안정화를 위한 TODO 항목을 정리한 것입니다. 우선순위는 별도로 지정되지 않았으며, 실제 작업은 프로젝트 관리자의 판단에 따라 순서를 결정합니다.

## 최근 롤백 관련 정보

2025-05-09에 이루어진 롤백으로 인해 다음 기능들이 손실되었습니다:
- Git conflict solver 슬래시 커맨드 기능
- LLM 서비스 내부망 모델 (NARRNAS, LLAMA4) 통합
- 문서 참조 기능을 갖춘 투두 시스템
- 플러그인 시스템 초기 구현
- 테마 관리 기능

이 기능들은 2790c50 커밋("안정화를 위한 현재 진행 상태 백업 커밋")에 보존되어 있습니다.

## 안정적으로 기능 재추가를 위한 권장사항 [TAG:claude-20250510-1:시작]

최신 버전의 불안정성을 해결하기 위해 다음 접근 방식을 추천합니다:

### 재도입 우선순위 기능 목록
1. [x] **스마트 프롬프팅 서비스** - 사용자 입력을 LLM에 전송하기 전 개선하는 기능 [TAG:claude-20250510-1:완료]
2. **향상된 채팅 UI** - 개선된 시각적 UI 요소와 상호작용
3. **고급 명령어 제안** - 범주화 및 키보드 탐색을 갖춘 슬래시 명령어 시스템
4. **트리 뷰 유효성 검사** - 트리 데이터 무결성 보장
5. **추가 트리 뷰 명령어** - 트리 뷰 제어를 위한 명령어

### 기능 재도입 프로세스
각 기능을 재도입할 때는 다음 단계를 반드시 준수합니다:

1. **체계적 분석**: 기능의 코어 요소와 의존성 식별
2. **점진적 구현**: 한 번에 한 컴포넌트씩 구현하고 테스트
3. **격리된 테스트**: 다른 기능과 독립적으로 각 기능 테스트
4. **통합 테스트**: 기존 기능과의 충돌 여부 확인
5. **롤백 계획**: 문제 발생 시 즉시 롤백할 수 있는 계획 마련

### 위험 완화 전략
다음 위험 요소에 특별히 주의합니다:

1. **타이밍 관련 코드**:
   - 타임아웃과 지연 사용 최소화
   - 비동기 작업 체인 단순화
   - 이벤트 기반 업데이트 권장

2. **DOM 조작**:
   - 복잡한 DOM 조작 간소화
   - 성능을 고려한 렌더링 최적화
   - 테스트 가능한 DOM 업데이트 패턴 적용

3. **VSCode API 통합**:
   - VSCode API 생명주기 존중
   - API 호출 타이밍 최적화
   - 일관된 에러 처리 적용

각 기능은 독립적인 브랜치에서 개발하고, 테스트 후 안정적일 때만 master 브랜치에 통합합니다.
[TAG:claude-20250510-1:완료]

## TODO 항목 완료 조건

모든 TODO 항목은 다음 조건을 모두 충족했을 때만 완료된 것으로 체크합니다:

1. 기능 구현 완료
2. LLM 테스트 통과 및 검증 완료
3. 변경사항 커밋
4. 관련 문서 업데이트

## 작업자/세션 추적 체계

모든 TODO 항목은 작업 시작과 완료 시 태그를 통해 추적됩니다. 태그 형식은 다음과 같습니다:

- 작업 시작: `[TAG:세션ID:시작]` (예: `[TAG:claude-20250509-1:시작]`)
- 작업 완료: `[TAG:세션ID:완료]` (예: `[TAG:claude-20250509-1:완료]`)

예시:
- [ ] WebView 렌더링 성능 개선 [TAG:claude-20250509-1:시작]
- [x] 내부 네트워크 LLM API 통합 오류 처리 및 모델 타입 검증 개선 [TAG:claude-20250508-3:완료]

세션ID는 다음 형식을 권장합니다: `<작업자>-<날짜>-<일련번호>`

## 체크리스트 관리 주의사항

- 체크리스트는 사용자의 명시적 허락 없이 절대로 삭제하지 않습니다.
- 완료된 항목은 삭제하지 않고 체크 표시([x])로 유지합니다.
- 새로운 항목이 필요한 경우, 기존 항목 아래에 추가합니다.
- 항목의 내용이 변경되는 경우, 원본을 유지하고 새 항목을 추가하는 방식으로 처리합니다.